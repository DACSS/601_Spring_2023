{
  "hash": "40c71310f75b1db0a27855dfa136d893",
  "result": {
    "markdown": "---\ntitle: \"Challenge 4\"\nauthor: \"Pradhakshya Dhanakumar\"\ndesription: \"Worked with ABC Poll Dataset\"\ndate: \"04/16/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - Challenge 4\n  - Pradhakshya Dhanakumar\n  - ABC Poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(readxl)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Reading Data\nRead the data from a .csv file\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_csv(\"_data/abc_poll_2021.csv\")\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 31\n       id xspanish complete_status ppage ppeduc5        ppeducat ppgender ppethm\n    <dbl> <chr>    <chr>           <dbl> <chr>          <chr>    <chr>    <chr> \n1 7230001 English  qualified          68 \"High school … High sc… Female   White…\n2 7230002 English  qualified          85 \"Bachelor\\x92… Bachelo… Male     White…\n3 7230003 English  qualified          69 \"High school … High sc… Male     White…\n4 7230004 English  qualified          74 \"Bachelor\\x92… Bachelo… Female   White…\n5 7230005 English  qualified          77 \"High school … High sc… Male     White…\n6 7230006 English  qualified          70 \"Bachelor\\x92… Bachelo… Male     White…\n# ℹ 23 more variables: pphhsize <chr>, ppinc7 <chr>, ppmarit5 <chr>,\n#   ppmsacat <chr>, ppreg4 <chr>, pprent <chr>, ppstaten <chr>, PPWORKA <chr>,\n#   ppemploy <chr>, Q1_a <chr>, Q1_b <chr>, Q1_c <chr>, Q1_d <chr>, Q1_e <chr>,\n#   Q1_f <chr>, Q2 <chr>, Q3 <chr>, Q4 <chr>, Q5 <chr>, QPID <chr>,\n#   ABCAGE <chr>, Contact <chr>, weights_pid <dbl>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"id\"              \"xspanish\"        \"complete_status\" \"ppage\"          \n [5] \"ppeduc5\"         \"ppeducat\"        \"ppgender\"        \"ppethm\"         \n [9] \"pphhsize\"        \"ppinc7\"          \"ppmarit5\"        \"ppmsacat\"       \n[13] \"ppreg4\"          \"pprent\"          \"ppstaten\"        \"PPWORKA\"        \n[17] \"ppemploy\"        \"Q1_a\"            \"Q1_b\"            \"Q1_c\"           \n[21] \"Q1_d\"            \"Q1_e\"            \"Q1_f\"            \"Q2\"             \n[25] \"Q3\"              \"Q4\"              \"Q5\"              \"QPID\"           \n[29] \"ABCAGE\"          \"Contact\"         \"weights_pid\"    \n```\n:::\n\n```{.r .cell-code}\ndim(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 527  31\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       id            xspanish         complete_status        ppage      \n Min.   :7230001   Length:527         Length:527         Min.   :18.00  \n 1st Qu.:7230132   Class :character   Class :character   1st Qu.:40.00  \n Median :7230264   Mode  :character   Mode  :character   Median :55.00  \n Mean   :7230264                                         Mean   :53.39  \n 3rd Qu.:7230396                                         3rd Qu.:67.00  \n Max.   :7230527                                         Max.   :91.00  \n   ppeduc5            ppeducat           ppgender            ppethm         \n Length:527         Length:527         Length:527         Length:527        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n   pphhsize            ppinc7            ppmarit5           ppmsacat        \n Length:527         Length:527         Length:527         Length:527        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n    ppreg4             pprent            ppstaten           PPWORKA         \n Length:527         Length:527         Length:527         Length:527        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n   ppemploy             Q1_a               Q1_b               Q1_c          \n Length:527         Length:527         Length:527         Length:527        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n     Q1_d               Q1_e               Q1_f                Q2           \n Length:527         Length:527         Length:527         Length:527        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n      Q3                 Q4                 Q5                QPID          \n Length:527         Length:527         Length:527         Length:527        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n    ABCAGE            Contact           weights_pid    \n Length:527         Length:527         Min.   :0.3240  \n Class :character   Class :character   1st Qu.:0.6332  \n Mode  :character   Mode  :character   Median :0.8451  \n                                       Mean   :1.0000  \n                                       3rd Qu.:1.1516  \n                                       Max.   :6.2553  \n```\n:::\n:::\n\n## Data Description\n\nThe ABC Poll dataset is a national survey taken for 527 people over 31 questions. The survey delves into various subjects, including 10 questions related to political opinions and beliefs, as well as party identification. Along with this, the dataset comprises 15 demographic variables, which have undergone recoding to make the analysis more accessible. Furthermore, the dataset includes 5 survey administration variables, offering information about the survey's methodology and logistics. The dataset is a comprehensive collection of information on the surveyed population's political attitudes and demographics, and it serves as a crucial resource for researchers and analysts seeking to understand these topics.\n\n\n## Tidy and Mutate Data\n\nFirst we can check if there are is data with any NULL values\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(is.na(data))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n:::\n\n\nFrom the above output we can see that there are 0 entries with NA.But on analysing further we can see that there is a value 'Skipped' for certain questions. So we can replace these values with NA.\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(data$Q1_a)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   Approve Disapprove    Skipped \n       329        193          5 \n```\n:::\n:::\n\n\nNow we can change the 'Skipped' values to NA.\n\n::: {.cell}\n\n```{.r .cell-code}\ndata<- data %>% mutate(across(starts_with(\"Q\"), ~ifelse(.==\"Skipped\", NA, .)))\ntable(data$Q1_a)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   Approve Disapprove \n       329        193 \n```\n:::\n:::\n\nSimilarly, we can do for QPID too.\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(data$QPID)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"A Democrat\"     \"An Independent\" \"Something else\" \"A Republican\"  \n[5] NA              \n```\n:::\n:::\n\nWe can see that there are specific articles like A, An used infront of the column names. It is not necessary, we can remove them.\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(QPID = gsub(\"^A\\\\s|^An\\\\s\", \"\", QPID))\ntable(data$QPID)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Democrat    Independent     Republican Something else \n           176            168            152             28 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#mutate\ndf1<-data%>%\n  mutate(ethnic = str_remove(ppethm, \", Non-Hispanic\"))%>%\n  select(-ppethm)\n\n#sanity check\ntable(df1$ethnic)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n2+ Races    Black Hispanic    Other    White \n      21       27       51       24      404 \n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}