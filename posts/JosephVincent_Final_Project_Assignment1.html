<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joseph Vincent">
<meta name="dcterms.date" content="2023-04-12">
<meta name="description" content="Air Quality and Related Deaths in California">

<title>Final Project Assignment#1: Project &amp; Data Description</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="styles.css">
<meta name="twitter:title" content="Final Project Assignment#1: Project &amp; Data Description">
<meta name="twitter:description" content="Air Quality and Related Deaths in California">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:site" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/UMass White Wordmark Horiz.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/DACSS" rel="" target="">
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">Contributors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss" rel="" target="">
 <span class="menu-text">DACSS</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#part-1.-introduction" id="toc-part-1.-introduction" class="nav-link active" data-scroll-target="#part-1.-introduction">Part 1. Introduction</a>
  <ul class="collapse">
  <li><a href="#datasets-introduction" id="toc-datasets-introduction" class="nav-link" data-scroll-target="#datasets-introduction">1. Datasets Introduction:</a></li>
  <li><a href="#what-questions-do-you-like-to-answer-with-this-datasets" id="toc-what-questions-do-you-like-to-answer-with-this-datasets" class="nav-link" data-scroll-target="#what-questions-do-you-like-to-answer-with-this-datasets">2. What questions do you like to answer with this dataset(s)?</a></li>
  </ul></li>
  <li><a href="#part-2.-describe-the-data-sets" id="toc-part-2.-describe-the-data-sets" class="nav-link" data-scroll-target="#part-2.-describe-the-data-sets">Part 2. Describe the data sets</a>
  <ul class="collapse">
  <li><a href="#reading-in-the-data-sets" id="toc-reading-in-the-data-sets" class="nav-link" data-scroll-target="#reading-in-the-data-sets">Reading in the data sets</a></li>
  </ul></li>
  <li><a href="#tidy-data-and-some-mutation-for-later-analysis" id="toc-tidy-data-and-some-mutation-for-later-analysis" class="nav-link" data-scroll-target="#tidy-data-and-some-mutation-for-later-analysis">Tidy data and some mutation for later analysis</a></li>
  <li><a href="#part-2-ctd." id="toc-part-2-ctd." class="nav-link" data-scroll-target="#part-2-ctd.">Part 2 ctd.</a>
  <ul class="collapse">
  <li><a href="#present-descriptive-information" id="toc-present-descriptive-information" class="nav-link" data-scroll-target="#present-descriptive-information">2. Present descriptive information:</a></li>
  <li><a href="#conduct-summary-statistics-of-the-datasets" id="toc-conduct-summary-statistics-of-the-datasets" class="nav-link" data-scroll-target="#conduct-summary-statistics-of-the-datasets">3. Conduct summary statistics of the datasets</a></li>
  </ul></li>
  <li><a href="#the-tentative-plan-for-visualization" id="toc-the-tentative-plan-for-visualization" class="nav-link" data-scroll-target="#the-tentative-plan-for-visualization">3. The Tentative Plan for Visualization</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Final Project Assignment#1: Project &amp; Data Description</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">final_Project_assignment_1</div>
    <div class="quarto-category">final_project_data_description</div>
    <div class="quarto-category">Joseph Vincent</div>
  </div>
  </div>

<div>
  <div class="description">
    Air Quality and Related Deaths in California
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Joseph Vincent </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 12, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="part-1.-introduction" class="level2">
<h2 class="anchored" data-anchor-id="part-1.-introduction">Part 1. Introduction</h2>
<section id="datasets-introduction" class="level3">
<h3 class="anchored" data-anchor-id="datasets-introduction">1. Datasets Introduction:</h3>
<p>My project focuses on air quality and its impact on public health. I’ve chosen to focus on Counties in California, as high quality data on deaths by type is available.</p>
<p>My data is coming from two separate sources:</p>
<ol type="1">
<li>I’m using the CDC’s database for Air Quality Measures on the National Environmental Health Tracking Network. The most recent and complete historic data available contains per-county data on air quality between the years of 1999 and 2013, inclusive.</li>
</ol>
<p>This data is collected by the Environmental Protection Agency’s network of more than 4,000 outdoor ambient air monitoring systems around the US, called the Air Quality System (AQS).</p>
<p>These systems collect two main types of data:</p>
<ul>
<li><p>Ozone Concentrations High concentrations of Ozone near the ground level can be harmful, causing irritation to the respiratory system and aggravating a variety of chronic lung diseases.</p></li>
<li><p>PM2.5 Concentrations This refers to tiny particulate matter in the air measuring two and a half microns or less in width that originates from a variety of pollutants. Exposure to PM2.5 particles can cause both short and long term health effects, particularly for those with chronic medical conditions of the lungs and heart.</p></li>
</ul>
<p>While this data is of high quality, it is lacking in rural areas where monitors are not present. To account for this, the CDC and EPA developed statistical models to fill in gaps in data across regions and time. This allows for granular analysis of county air quality data.</p>
<p>Each row in this dataset represents an air quality <code>value</code>, for a given county, report year and type of air quality measure.</p>
<p>Source: https://data.cdc.gov/Environmental-Health-Toxicology/Air-Quality-Measures-on-the-National-Environmental/cjae-szjv</p>
<ol start="2" type="1">
<li>In order to draw conclusions about air quality’s effect on public health, I’m combining this air quality data with data from the state of California’s Department of Health and Human Services (HHS) on annual number of deaths by county, including underlying cause of death, from the same date range (1999-2013).</li>
</ol>
<p>This is collected based on information from death certificates. In addition to the count of deaths by county, they also provide the cause of death as defined by the WHO, indicated by one of a number of categories. For my analysis, I’m most interested in the following lung and heart related conditions, but have also included suicide as a potential area of interest:</p>
<ul>
<li>ALL = All causes (total)</li>
<li>CLD = Chronic lower respiratory disease (CLRD)</li>
<li>HTD = Diseases of heart</li>
<li>PNF = Pneumonia and influenza</li>
<li>SUI = Intentional self-harm (suicide)</li>
</ul>
<p>Each row in the data represents a number of deaths for a given year and county, stratified by cause of death and some demographic variables like age and gender.</p>
<p>source: https://data.chhs.ca.gov/dataset/death-profiles-by-county/resource/e692e6a1-bddd-48ab-a0c8-fa0f1f43e9f4?i nner_span=True</p>
</section>
<section id="what-questions-do-you-like-to-answer-with-this-datasets" class="level3">
<h3 class="anchored" data-anchor-id="what-questions-do-you-like-to-answer-with-this-datasets">2. What questions do you like to answer with this dataset(s)?</h3>
<p>I would like to answer the following questions:</p>
<ol type="1">
<li><p>What is the correlation between air quality in a given county and year and its immediate affect on deaths in that region? Is there a lagging effect in the year, or two years after poor air quality?</p></li>
<li><p>Do the air quality measures (Ozone and PM2.5) affect particular causes of death more than others? For example, are chronic lung diseases more impacted by Ozone levels or PM2.5 levels? How about for heart disease or even suicide?</p></li>
</ol>
</section>
</section>
<section id="part-2.-describe-the-data-sets" class="level2">
<h2 class="anchored" data-anchor-id="part-2.-describe-the-data-sets">Part 2. Describe the data sets</h2>
<section id="reading-in-the-data-sets" class="level3">
<h3 class="anchored" data-anchor-id="reading-in-the-data-sets">Reading in the data sets</h3>
<p>As evidenced by the head samples of the two original data sets below, despite both revolving around county-years they are in quite different structures.</p>
<p>The air quality data consists of measures of both ozone and PM2.5. Ozone levels are measured by number of days with higher than average Ozone levels, and also person-days by county by multiplying by the population for that year. PM2.5 levels are lacking raw number of days with higher than average levels, but are recorded in percent of days, person days, and the annual average level for that county-year.</p>
<p>On thing that’s interesting about the data structure is that all of the measures of the same type are listed for each county in a given year, then the next measure is listed for each county in a given year, and so on.</p>
<p>As for the death data, each row contains a count of deaths in the “value” column, but they are not exclusive values even within the same county-year, as a totals row is included labelled as “ALL”.</p>
<p>These data are also stratified by demographic data, such as age and gender, which I don’t believe will be relevant for my analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reading in air quality data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>airquality <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"JosephVincent_FinalProjectData/Air_Quality_Measures_on_the_National_Environmental_Health_Tracking_Network.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["MeasureId"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["MeasureName"],"name":[2],"type":["chr"],"align":["left"]},{"label":["MeasureType"],"name":[3],"type":["chr"],"align":["left"]},{"label":["StratificationLevel"],"name":[4],"type":["chr"],"align":["left"]},{"label":["StateFips"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["StateName"],"name":[6],"type":["chr"],"align":["left"]},{"label":["CountyFips"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["CountyName"],"name":[8],"type":["chr"],"align":["left"]},{"label":["ReportYear"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Value"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Unit"],"name":[11],"type":["chr"],"align":["left"]},{"label":["UnitName"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DataOrigin"],"name":[13],"type":["chr"],"align":["left"]},{"label":["MonitorOnly"],"name":[14],"type":["dbl"],"align":["right"]}],"data":[{"1":"83","2":"Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard","3":"Counts","4":"State x County","5":"1","6":"Alabama","7":"1027","8":"Clay","9":"1999","10":"33","11":"No Units","12":"No Units","13":"Monitor Only","14":"1"},{"1":"83","2":"Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard","3":"Counts","4":"State x County","5":"1","6":"Alabama","7":"1051","8":"Elmore","9":"1999","10":"5","11":"No Units","12":"No Units","13":"Monitor Only","14":"1"},{"1":"83","2":"Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard","3":"Counts","4":"State x County","5":"1","6":"Alabama","7":"1073","8":"Jefferson","9":"1999","10":"39","11":"No Units","12":"No Units","13":"Monitor Only","14":"1"},{"1":"83","2":"Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard","3":"Counts","4":"State x County","5":"1","6":"Alabama","7":"1079","8":"Lawrence","9":"1999","10":"28","11":"No Units","12":"No Units","13":"Monitor Only","14":"1"},{"1":"83","2":"Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard","3":"Counts","4":"State x County","5":"1","6":"Alabama","7":"1089","8":"Madison","9":"1999","10":"31","11":"No Units","12":"No Units","13":"Monitor Only","14":"1"},{"1":"83","2":"Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard","3":"Counts","4":"State x County","5":"1","6":"Alabama","7":"1097","8":"Mobile","9":"1999","10":"32","11":"No Units","12":"No Units","13":"Monitor Only","14":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reading in deaths dataset</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>calideaths <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"JosephVincent_FinalProjectData/2021-05-14_deaths_final_1999_2013_county_year_sup.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filtering for occurrence deaths (i.e. all deaths that occurred, disregarding residence)</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Geography_Type <span class="sc">==</span> <span class="st">"Occurrence"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#de-selecting geography type as they are now all occurrence</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Geography_Type)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(calideaths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["County"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Strata"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Strata_Name"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Cause"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Cause_Desc"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Count"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Annotation_Code"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Annotation_Desc"],"name":[9],"type":["chr"],"align":["left"]}],"data":[{"1":"1999","2":"Alameda","3":"Total Population","4":"Total Population","5":"ALL","6":"All causes (total)","7":"9738","8":"NA","9":"NA"},{"1":"1999","2":"Alameda","3":"Age","4":"Under 1 year","5":"ALL","6":"All causes (total)","7":"136","8":"NA","9":"NA"},{"1":"1999","2":"Alameda","3":"Age","4":"1-4 years","5":"ALL","6":"All causes (total)","7":"29","8":"NA","9":"NA"},{"1":"1999","2":"Alameda","3":"Age","4":"5-14 years","5":"ALL","6":"All causes (total)","7":"38","8":"NA","9":"NA"},{"1":"1999","2":"Alameda","3":"Age","4":"15-24 years","5":"ALL","6":"All causes (total)","7":"114","8":"NA","9":"NA"},{"1":"1999","2":"Alameda","3":"Age","4":"25-34 years","5":"ALL","6":"All causes (total)","7":"183","8":"NA","9":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In order to combine these data sets, a number of things need to be done first to get them into the same structure, where each row represents a county year.</p>
<p>First, I’ll filter for California, then pivot wider so that the air quality measures each are represented in a column. Additional cleaning measures can be seen in the code below.</p>
<p>One thing worth mentioning is that the air quality data consists of both “monitored” values and “modeled” values. As described on the CDC’s website, the CDC and EPA collaborated to develop statiscal models for filling in missing data in regions without data. For my analysis, I will be using the modeled data to allow me to look at counties that would otherwise be missing data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>airqualitycali <span class="ot">&lt;-</span> airquality <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filtering for california only</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(StateName <span class="sc">==</span> <span class="st">"California"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#selecting only relevant columns</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CountyName, ReportYear, MeasureName, Value) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#renaming county and year to be consistent with deaths dataset</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"County"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">CountyName</span><span class="st">`</span>, <span class="st">"Year"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">ReportYear</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#pivoting so that each row is a year-county for merging data</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> MeasureName, <span class="at">values_from =</span> Value) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#renaming Air Quality columns</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Ozone Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard</span><span class="st">`</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Ozone Person Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of person-days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard</span><span class="st">`</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Percent of Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Percent of days with PM2.5 levels over the National Ambient Air Quality Standard (NAAQS)</span><span class="st">`</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Person Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Person-days with PM2.5 over the National Ambient Air Quality Standard</span><span class="st">`</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Annual Average Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Annual average ambient concentrations of PM2.5 in micrograms per cubic meter (based on seasonal averages and daily measurement)</span><span class="st">`</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Ozone Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Ozone Person Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of person-days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Percent of Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Percent of days with PM2.5 levels over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Person Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of person-days with PM2.5 over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Annual Average"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Annual average ambient concentrations of PM 2.5 in micrograms per cubic meter, based on seasonal averages and daily measurement (monitor and modeled data)</span><span class="st">`</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#filling in modeled data for first and last two years, where there is no modeled data</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>airqualitycali <span class="ot">&lt;-</span> airqualitycali <span class="sc">%&gt;%</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">Ozone Days Delete</span><span class="st">`</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">Ozone Person Days Delete</span><span class="st">`</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>)  <span class="sc">~</span> <span class="st">`</span><span class="at">PM2.5 Percent of Days Delete</span><span class="st">`</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">PM2.5 Person Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">PM2.5 Person Days Delete</span><span class="st">`</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">PM2.5 Person Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">PM2.5 Annual Average</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">PM2.5 Annual Average Delete</span><span class="st">`</span>,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">PM2.5 Annual Average</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">contains</span>(<span class="st">"Delete"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For prepping the deaths data, I’ve filtered for only the causes of death I believe may be relevant to air quality, and have otherwise pivoted the data to allow for each row to represent a county-year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#turning calideaths into a wider format that where each rows is a year-county for combining</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>calideathswider <span class="ot">&lt;-</span> calideaths <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Strata_Name <span class="sc">==</span> <span class="st">"Total Population"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#de-selecting some stratifying variables</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Cause_Desc, <span class="sc">-</span>Annotation_Code, <span class="sc">-</span>Annotation_Desc, <span class="sc">-</span>Strata, <span class="sc">-</span>Strata_Name) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#focusing on relevant conditions</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Cause <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ALL"</span>, <span class="st">"CLD"</span>, <span class="st">"PNF"</span>, <span class="st">"SUI"</span>, <span class="st">"HTD"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#pivoting into wider format</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Cause, <span class="at">values_from =</span> Count)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#merging data</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>airqualityanddeaths <span class="ot">&lt;-</span> <span class="fu">left_join</span>(calideathswider, airqualitycali, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"County"</span>, <span class="st">"Year"</span>))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airqualityanddeaths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["County"],"name":[2],"type":["chr"],"align":["left"]},{"label":["ALL"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CLD"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["HTD"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["PNF"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["SUI"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Ozone Days"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Ozone Person Days"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Percent of Days"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Person Days"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Annual Average"],"name":[12],"type":["dbl"],"align":["right"]}],"data":[{"1":"1999","2":"Alameda","3":"9738","4":"532","5":"2830","6":"320","7":"108","8":"15","9":"21406710","10":"7.792208","11":"40589346","12":"13.89538"},{"1":"1999","2":"Alpine","3":"11","4":"0","5":"NA","6":"0","7":"0","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA"},{"1":"1999","2":"Amador","3":"332","4":"17","5":"110","6":"NA","7":"NA","8":"45","9":"1570635","10":"NA","11":"NA","12":"NA"},{"1":"1999","2":"Butte","3":"2244","4":"164","5":"569","6":"85","7":"34","8":"14","9":"2817948","10":"11.864407","11":"8716534","12":"17.52738"},{"1":"1999","2":"Calaveras","3":"333","4":"28","5":"100","6":"12","7":"NA","8":"53","9":"2120000","10":"0.000000","11":"0","12":"11.08810"},{"1":"1999","2":"Colusa","3":"111","4":"NA","5":"37","6":"NA","7":"NA","8":"5","9":"93100","10":"7.058824","11":"479738","12":"13.22038"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="tidy-data-and-some-mutation-for-later-analysis" class="level2">
<h2 class="anchored" data-anchor-id="tidy-data-and-some-mutation-for-later-analysis">Tidy data and some mutation for later analysis</h2>
<p>As I’m creating my data set, I’ll perform some mutations and tidy-ing ahead of time, as I’ll want to include some new columns while summarizing the data.</p>
<p>First, I’ll create a column for Population by using the person-day columns already provided.</p>
<p>I’ll also create “death per 100,000” columns in order to standardize deaths by counties.</p>
<p>I also have created a “raw” PM2.5 Days column that counts the number of days, instead of a percent.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>airqualityanddeaths <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#creating a column for population based on person days column</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"Population"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#creating standardized death columns</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"ALL Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">ALL</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"CLD Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">CLD</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"HTD Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">HTD</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"PNF Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">PNF</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"SUI Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">SUI</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#creating a raw PM2.5 Days column, using the existing percent of days column</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"PM2.5 Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span><span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">365</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#re-arranging</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>airqualityanddeaths <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, County, Population, </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>         ALL, <span class="st">`</span><span class="at">ALL Deaths per 100,000</span><span class="st">`</span>, </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>         CLD, <span class="st">`</span><span class="at">CLD Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>         HTD, <span class="st">`</span><span class="at">HTD Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>         PNF, <span class="st">`</span><span class="at">PNF Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>         SUI, <span class="st">`</span><span class="at">SUI Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">PM2.5 Person Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">PM2.5 Annual Average</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="part-2-ctd." class="level2">
<h2 class="anchored" data-anchor-id="part-2-ctd.">Part 2 ctd.</h2>
<section id="present-descriptive-information" class="level3">
<h3 class="anchored" data-anchor-id="present-descriptive-information">2. Present descriptive information:</h3>
<p>My new dataset consists of 870 rows, each representing a county-year. There are 19 columns. 2 of these are “key” columns, indicating the county and year. There is a single column for population. The rest are all unique variables each representing a death count by disease type or an air quality measure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(airqualityanddeaths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 870  19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airqualityanddeaths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["County"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["ALL"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ALL Deaths per 100,000"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CLD"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["CLD Deaths per 100,000"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["HTD"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["HTD Deaths per 100,000"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["PNF"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["PNF Deaths per 100,000"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["SUI"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["SUI Deaths per 100,000"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["Ozone Days"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["Ozone Person Days"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Days"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Person Days"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Percent of Days"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["PM2.5 Annual Average"],"name":[19],"type":["dbl"],"align":["right"]}],"data":[{"1":"1999","2":"Alameda","3":"1427114","4":"9738","5":"682.3561","6":"532","7":"37.27803","8":"2830","9":"198.3023","10":"320","11":"22.42288","12":"108","13":"7.567721","14":"15","15":"21406710","16":"28.44156","17":"40589346","18":"7.792208","19":"13.89538"},{"1":"1999","2":"Alpine","3":"NA","4":"11","5":"NA","6":"0","7":"NA","8":"NA","9":"NA","10":"0","11":"NA","12":"0","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA"},{"1":"1999","2":"Amador","3":"34903","4":"332","5":"951.2076","6":"17","7":"48.70641","8":"110","9":"315.1592","10":"NA","11":"NA","12":"NA","13":"NA","14":"45","15":"1570635","16":"NA","17":"NA","18":"NA","19":"NA"},{"1":"1999","2":"Butte","3":"201282","4":"2244","5":"1114.8538","6":"164","7":"81.47773","8":"569","9":"282.6880","10":"85","11":"42.22931","12":"34","13":"16.891724","14":"14","15":"2817948","16":"43.30508","17":"8716534","18":"11.864407","19":"17.52738"},{"1":"1999","2":"Calaveras","3":"40000","4":"333","5":"832.5000","6":"28","7":"70.00000","8":"100","9":"250.0000","10":"12","11":"30.00000","12":"NA","13":"NA","14":"53","15":"2120000","16":"0.00000","17":"0","18":"0.000000","19":"11.08810"},{"1":"1999","2":"Colusa","3":"18620","4":"111","5":"596.1332","6":"NA","7":"NA","8":"37","9":"198.7111","10":"NA","11":"NA","12":"NA","13":"NA","14":"5","15":"93100","16":"25.76471","17":"479738","18":"7.058824","19":"13.22038"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="conduct-summary-statistics-of-the-datasets" class="level3">
<h3 class="anchored" data-anchor-id="conduct-summary-statistics-of-the-datasets">3. Conduct summary statistics of the datasets</h3>
<p>First, I will look at summary statistics for air quality by county.</p>
<p>As seen in the below table, the counties with the highest mean Ozone days are San Bernardino, Riverside, Tulare, and Kern. Each with about a third of the year being above the national average.</p>
<p>The counties with the highest mean PM2.5 days are similar - Fresno, Riverside and Kern - with a mean of around 50 days per year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ozoneandpmdaysbycounty <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(County) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MeanOzoneDays =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianOzoneDays =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxOzoneDays =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinOzoneDays =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanPM2.5Days =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianPM2.5Days =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxPM2.5Days =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinPM2.5Days =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbycounty, <span class="fu">desc</span>(MeanOzoneDays)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["County"],"name":[1],"type":["chr"],"align":["left"]},{"label":["MeanOzoneDays"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MedianOzoneDays"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["MaxOzoneDays"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MinOzoneDays"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MeanPM2.5Days"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MedianPM2.5Days"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["MaxPM2.5Days"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["MinPM2.5Days"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"San Bernardino","2":"113.73333","3":"116","4":"130","5":"93","6":"36.51799","7":"28","8":"98.00000","9":"4.00000"},{"1":"Riverside","2":"104.86667","3":"106","4":"118","5":"76","6":"47.88748","7":"37","8":"117.00000","9":"9.00000"},{"1":"Tulare","2":"102.93333","3":"104","4":"132","5":"63","6":"38.21362","7":"32","8":"74.87179","9":"13.00000"},{"1":"Kern","2":"102.40000","3":"106","4":"144","5":"47","6":"47.65792","7":"47","8":"75.00000","9":"25.10029"},{"1":"Fresno","2":"82.13333","3":"66","4":"137","5":"38","6":"50.28756","7":"43","8":"87.05021","9":"24.00000"},{"1":"Los Angeles","2":"80.60000","3":"79","4":"111","5":"42","6":"39.09380","7":"28","8":"108.81988","9":"5.00000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbycounty, <span class="fu">desc</span>(MeanPM2<span class="fl">.5</span>Days)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["County"],"name":[1],"type":["chr"],"align":["left"]},{"label":["MeanOzoneDays"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MedianOzoneDays"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["MaxOzoneDays"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MinOzoneDays"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MeanPM2.5Days"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MedianPM2.5Days"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["MaxPM2.5Days"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["MinPM2.5Days"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"Fresno","2":"82.13333","3":"66","4":"137","5":"38","6":"50.28756","7":"43","8":"87.05021","9":"24.00000"},{"1":"Riverside","2":"104.86667","3":"106","4":"118","5":"76","6":"47.88748","7":"37","8":"117.00000","9":"9.00000"},{"1":"Kern","2":"102.40000","3":"106","4":"144","5":"47","6":"47.65792","7":"47","8":"75.00000","9":"25.10029"},{"1":"Los Angeles","2":"80.60000","3":"79","4":"111","5":"42","6":"39.09380","7":"28","8":"108.81988","9":"5.00000"},{"1":"Tulare","2":"102.93333","3":"104","4":"132","5":"63","6":"38.21362","7":"32","8":"74.87179","9":"13.00000"},{"1":"Kings","2":"41.73333","3":"41","4":"91","5":"16","6":"36.87792","7":"33","8":"70.82090","9":"11.00000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Next we will look at similar air quality summary statistics, but by year. As you can see, 2002 seems to be a particularly bad year for both, topping out the mean days for both Ozone and PM2.5. In general, the early 2000s seem to be bad for air quality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ozoneandpmdaysbyyear <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MeanOzoneDays =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianOzoneDays =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxOzoneDays =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinOzoneDays =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanPM2.5Days =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianPM2.5Days =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxPM2.5Days =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinPM2.5Days =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>))</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbyyear, <span class="fu">desc</span>(MeanOzoneDays)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["MeanOzoneDays"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MedianOzoneDays"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["MaxOzoneDays"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MinOzoneDays"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MeanPM2.5Days"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MedianPM2.5Days"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["MaxPM2.5Days"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["MinPM2.5Days"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"2002","2":"31.36207","3":"13.5","4":"135","5":"0","6":"21.603448","7":"14.500000","8":"90.00000","9":"1.0000000"},{"1":"2003","2":"29.91379","3":"12.5","4":"144","5":"0","6":"7.948276","7":"2.000000","8":"78.00000","9":"0.0000000"},{"1":"2001","2":"26.51724","3":"11.0","4":"135","5":"0","6":"17.224138","7":"11.000000","8":"117.00000","9":"0.0000000"},{"1":"2006","2":"24.96552","3":"13.0","4":"116","5":"0","6":"8.189655","7":"4.000000","8":"40.00000","9":"0.0000000"},{"1":"2008","2":"23.01724","3":"13.0","4":"117","5":"0","6":"17.073912","7":"13.961749","8":"61.83060","9":"0.9972678"},{"1":"2004","2":"20.72414","3":"7.0","4":"134","5":"0","6":"9.491238","7":"4.487705","8":"56.84426","9":"0.0000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbyyear, <span class="fu">desc</span>(MeanPM2<span class="fl">.5</span>Days)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["MeanOzoneDays"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MedianOzoneDays"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["MaxOzoneDays"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MinOzoneDays"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MeanPM2.5Days"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["MedianPM2.5Days"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["MaxPM2.5Days"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["MinPM2.5Days"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"2002","2":"31.36207","3":"13.5","4":"135","5":"0","6":"21.603448","7":"14.500000","8":"90.00000","9":"1.0000000"},{"1":"2001","2":"26.51724","3":"11.0","4":"135","5":"0","6":"17.224138","7":"11.000000","8":"117.00000","9":"0.0000000"},{"1":"2008","2":"23.01724","3":"13.0","4":"117","5":"0","6":"17.073912","7":"13.961749","8":"61.83060","9":"0.9972678"},{"1":"2007","2":"16.75862","3":"6.0","4":"118","5":"0","6":"12.293103","7":"6.000000","8":"65.00000","9":"0.0000000"},{"1":"2005","2":"18.06897","3":"4.0","4":"110","5":"0","6":"9.896552","7":"6.000000","8":"41.00000","9":"0.0000000"},{"1":"2004","2":"20.72414","3":"7.0","4":"134","5":"0","6":"9.491238","7":"4.487705","8":"56.84426","9":"0.0000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Finally, I’ll look at some summary statistics for deaths per 100,000 by county. The counties with the highest rate of death in this time period were Shasta, Del Norte, Butte, Inyo and Lake. All relatively small, rural counties.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="st">"deathsper100,000bycounty"</span> <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(County) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MeanALL =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ALL Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanCLD =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">CLD Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanHTD =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">HTD Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanPNF =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PNF Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanSUI =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">SUI Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(<span class="st">`</span><span class="at">deathsper100,000bycounty</span><span class="st">`</span>, <span class="fu">desc</span>(MeanALL)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["County"],"name":[1],"type":["chr"],"align":["left"]},{"label":["MeanALL"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MeanCLD"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["MeanHTD"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MeanPNF"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MeanSUI"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Shasta","2":"1194.010","3":"94.62931","4":"299.9452","5":"26.73594","6":"21.95072"},{"1":"Del Norte","2":"1095.010","3":"80.30076","4":"284.7027","5":"NaN","6":"NaN"},{"1":"Butte","2":"1091.962","3":"77.73387","4":"273.2187","5":"28.77755","6":"17.49622"},{"1":"Inyo","2":"1047.873","3":"80.60032","4":"320.2453","5":"0.00000","6":"64.90674"},{"1":"Lake","2":"1022.434","3":"85.98452","4":"232.9399","5":"17.19690","6":"28.14039"},{"1":"Siskiyou","2":"1005.345","3":"61.41249","4":"263.8462","5":"36.39259","6":"NaN"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="the-tentative-plan-for-visualization" class="level2">
<h2 class="anchored" data-anchor-id="the-tentative-plan-for-visualization">3. The Tentative Plan for Visualization</h2>
<p>To answer my first question about the correlation between air quality and deaths by county over time, I plan to create time-series visualizations. This could be done in a few ways:</p>
<p>One would be to take a series of counties for a given year (or vice versa) and create a series of small line plots with two y axes - one showing deaths per 100,000 and the other showing either Ozone or PM2.5 levels.</p>
<p>Another way to show air quality over time would be to use a time-series heat map, that changes colors for years with higher levels. How this would be directly compared to the deaths data, I’m not entirely sure.</p>
<p>A possibility would be to use a map of california for selected years, and show both heat maps of county air quality levels and indicate a death per 100,000 number.</p>
<p>For the second question - how each cause of death correlates to specific air quality values - I could create some type of correlation matrix, though more exploration is needed. More simply, I could create similar time series line charts by counties, where each cause of death is mapped in addition to changes in air quality type.</p>
<p>Much of the mutation has already been done, but a remaining point of contention will be how to handle NA’s, particularly in the deaths data. After some reading, it seems that NAs indicate that there was not enough data, so the numbers were being surpressed. So perhaps a 0 values or even random value below a threshold would allow me to fill these in.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/601_Spring_2023" data-repo-id="R_kgDOI4JcJA" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb15" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Final Project Assignment#1: Project &amp; Data Description"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Joseph Vincent"</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Air Quality and Related Deaths in California"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "04/12/2023"</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">    css: styles.css</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - final_Project_assignment_1</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - final_project_data_description</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">  - Joseph Vincent</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: inline</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> </span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">  markdown: </span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co">    wrap: sentence</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1. Introduction</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="fu">### 1. Datasets Introduction:</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>My project focuses on air quality and its impact on public health.</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>I've chosen to focus on Counties in California, as high quality data on deaths by type is available.</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>My data is coming from two separate sources:</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>1)  I'm using the CDC's database for Air Quality Measures on the National Environmental Health Tracking Network. The most recent and complete historic data available contains per-county data on air quality between the years of 1999 and 2013, inclusive.</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>This data is collected by the Environmental Protection Agency's network of more than 4,000 outdoor ambient air monitoring systems around the US, called the Air Quality System (AQS).</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>These systems collect two main types of data:</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Ozone Concentrations High concentrations of Ozone near the ground level can be harmful, causing irritation to the respiratory system and aggravating a variety of chronic lung diseases.</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>PM2.5 Concentrations This refers to tiny particulate matter in the air measuring two and a half microns or less in width that originates from a variety of pollutants.</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>    Exposure to PM2.5 particles can cause both short and long term health effects, particularly for those with chronic medical conditions of the lungs and heart.</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>While this data is of high quality, it is lacking in rural areas where monitors are not present.</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>To account for this, the CDC and EPA developed statistical models to fill in gaps in data across regions and time.</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>This allows for granular analysis of county air quality data.</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>Each row in this dataset represents an air quality <span class="in">`value`</span>, for a given county, report year and type of air quality measure.</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>Source: https://data.cdc.gov/Environmental-Health-Toxicology/Air-Quality-Measures-on-the-National-Environmental/cjae-szjv</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>2)  In order to draw conclusions about air quality's effect on public health, I'm combining this air quality data with data from the state of California's Department of Health and Human Services (HHS) on annual number of deaths by county, including underlying cause of death, from the same date range (1999-2013).</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>This is collected based on information from death certificates.</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>In addition to the count of deaths by county, they also provide the cause of death as defined by the WHO, indicated by one of a number of categories.</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>For my analysis, I'm most interested in the following lung and heart related conditions, but have also included suicide as a potential area of interest:</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>ALL = All causes (total)</span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>CLD = Chronic lower respiratory disease (CLRD)</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>HTD = Diseases of heart</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>PNF = Pneumonia and influenza</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>SUI = Intentional self-harm (suicide)</span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>Each row in the data represents a number of deaths for a given year and county, stratified by cause of death and some demographic variables like age and gender.</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>source: https://data.chhs.ca.gov/dataset/death-profiles-by-county/resource/e692e6a1-bddd-48ab-a0c8-fa0f1f43e9f4?i</span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>nner_span=True</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2. What questions do you like to answer with this dataset(s)?</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>I would like to answer the following questions:</span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>1)  What is the correlation between air quality in a given county and year and its immediate affect on deaths in that region?</span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>    Is there a lagging effect in the year, or two years after poor air quality?</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a>2)  Do the air quality measures (Ozone and PM2.5) affect particular causes of death more than others?</span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>    For example, are chronic lung diseases more impacted by Ozone levels or PM2.5 levels?</span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a>    How about for heart disease or even suicide?</span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2. Describe the data sets</span></span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reading in the data sets</span></span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a>As evidenced by the head samples of the two original data sets below, despite both revolving around county-years they are in quite different structures.</span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a>The air quality data consists of measures of both ozone and PM2.5.</span>
<span id="cb15-98"><a href="#cb15-98" aria-hidden="true" tabindex="-1"></a>Ozone levels are measured by number of days with higher than average Ozone levels, and also person-days by county by multiplying by the population for that year.</span>
<span id="cb15-99"><a href="#cb15-99" aria-hidden="true" tabindex="-1"></a>PM2.5 levels are lacking raw number of days with higher than average levels, but are recorded in percent of days, person days, and the annual average level for that county-year.</span>
<span id="cb15-100"><a href="#cb15-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-101"><a href="#cb15-101" aria-hidden="true" tabindex="-1"></a>On thing that's interesting about the data structure is that all of the measures of the same type are listed for each county in a given year, then the next measure is listed for each county in a given year, and so on.</span>
<span id="cb15-102"><a href="#cb15-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-103"><a href="#cb15-103" aria-hidden="true" tabindex="-1"></a>As for the death data, each row contains a count of deaths in the "value" column, but they are not exclusive values even within the same county-year, as a totals row is included labelled as "ALL".</span>
<span id="cb15-104"><a href="#cb15-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-105"><a href="#cb15-105" aria-hidden="true" tabindex="-1"></a>These data are also stratified by demographic data, such as age and gender, which I don't believe will be relevant for my analysis.</span>
<span id="cb15-106"><a href="#cb15-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-109"><a href="#cb15-109" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-110"><a href="#cb15-110" aria-hidden="true" tabindex="-1"></a><span class="co">#reading in air quality data</span></span>
<span id="cb15-111"><a href="#cb15-111" aria-hidden="true" tabindex="-1"></a>airquality <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"JosephVincent_FinalProjectData/Air_Quality_Measures_on_the_National_Environmental_Health_Tracking_Network.csv"</span>)</span>
<span id="cb15-112"><a href="#cb15-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-113"><a href="#cb15-113" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airquality)</span>
<span id="cb15-114"><a href="#cb15-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-115"><a href="#cb15-115" aria-hidden="true" tabindex="-1"></a><span class="co">#reading in deaths dataset</span></span>
<span id="cb15-116"><a href="#cb15-116" aria-hidden="true" tabindex="-1"></a>calideaths <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"JosephVincent_FinalProjectData/2021-05-14_deaths_final_1999_2013_county_year_sup.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-117"><a href="#cb15-117" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filtering for occurrence deaths (i.e. all deaths that occurred, disregarding residence)</span></span>
<span id="cb15-118"><a href="#cb15-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Geography_Type <span class="sc">==</span> <span class="st">"Occurrence"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-119"><a href="#cb15-119" aria-hidden="true" tabindex="-1"></a>  <span class="co">#de-selecting geography type as they are now all occurrence</span></span>
<span id="cb15-120"><a href="#cb15-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Geography_Type)</span>
<span id="cb15-121"><a href="#cb15-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-122"><a href="#cb15-122" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(calideaths)</span>
<span id="cb15-123"><a href="#cb15-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-124"><a href="#cb15-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-125"><a href="#cb15-125" aria-hidden="true" tabindex="-1"></a>In order to combine these data sets, a number of things need to be done first to get them into the same structure, where each row represents a county year.</span>
<span id="cb15-126"><a href="#cb15-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-127"><a href="#cb15-127" aria-hidden="true" tabindex="-1"></a>First, I'll filter for California, then pivot wider so that the air quality measures each are represented in a column.</span>
<span id="cb15-128"><a href="#cb15-128" aria-hidden="true" tabindex="-1"></a>Additional cleaning measures can be seen in the code below.</span>
<span id="cb15-129"><a href="#cb15-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-130"><a href="#cb15-130" aria-hidden="true" tabindex="-1"></a>One thing worth mentioning is that the air quality data consists of both "monitored" values and "modeled" values.</span>
<span id="cb15-131"><a href="#cb15-131" aria-hidden="true" tabindex="-1"></a>As described on the CDC's website, the CDC and EPA collaborated to develop statiscal models for filling in missing data in regions without data.</span>
<span id="cb15-132"><a href="#cb15-132" aria-hidden="true" tabindex="-1"></a>For my analysis, I will be using the modeled data to allow me to look at counties that would otherwise be missing data.</span>
<span id="cb15-133"><a href="#cb15-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-136"><a href="#cb15-136" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-137"><a href="#cb15-137" aria-hidden="true" tabindex="-1"></a>airqualitycali <span class="ot">&lt;-</span> airquality <span class="sc">%&gt;%</span></span>
<span id="cb15-138"><a href="#cb15-138" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filtering for california only</span></span>
<span id="cb15-139"><a href="#cb15-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(StateName <span class="sc">==</span> <span class="st">"California"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-140"><a href="#cb15-140" aria-hidden="true" tabindex="-1"></a>  <span class="co">#selecting only relevant columns</span></span>
<span id="cb15-141"><a href="#cb15-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CountyName, ReportYear, MeasureName, Value) <span class="sc">%&gt;%</span></span>
<span id="cb15-142"><a href="#cb15-142" aria-hidden="true" tabindex="-1"></a>  <span class="co">#renaming county and year to be consistent with deaths dataset</span></span>
<span id="cb15-143"><a href="#cb15-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"County"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">CountyName</span><span class="st">`</span>, <span class="st">"Year"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">ReportYear</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-144"><a href="#cb15-144" aria-hidden="true" tabindex="-1"></a>  <span class="co">#pivoting so that each row is a year-county for merging data</span></span>
<span id="cb15-145"><a href="#cb15-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> MeasureName, <span class="at">values_from =</span> Value) <span class="sc">%&gt;%</span></span>
<span id="cb15-146"><a href="#cb15-146" aria-hidden="true" tabindex="-1"></a>  <span class="co">#renaming Air Quality columns</span></span>
<span id="cb15-147"><a href="#cb15-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Ozone Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard</span><span class="st">`</span>,</span>
<span id="cb15-148"><a href="#cb15-148" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Ozone Person Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of person-days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard</span><span class="st">`</span>,</span>
<span id="cb15-149"><a href="#cb15-149" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Percent of Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Percent of days with PM2.5 levels over the National Ambient Air Quality Standard (NAAQS)</span><span class="st">`</span>,</span>
<span id="cb15-150"><a href="#cb15-150" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Person Days Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Person-days with PM2.5 over the National Ambient Air Quality Standard</span><span class="st">`</span>,</span>
<span id="cb15-151"><a href="#cb15-151" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Annual Average Delete"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Annual average ambient concentrations of PM2.5 in micrograms per cubic meter (based on seasonal averages and daily measurement)</span><span class="st">`</span>,</span>
<span id="cb15-152"><a href="#cb15-152" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Ozone Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb15-153"><a href="#cb15-153" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Ozone Person Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of person-days with maximum 8-hour average ozone concentration over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb15-154"><a href="#cb15-154" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Percent of Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Percent of days with PM2.5 levels over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb15-155"><a href="#cb15-155" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Person Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Number of person-days with PM2.5 over the National Ambient Air Quality Standard (monitor and modeled data)</span><span class="st">`</span>,</span>
<span id="cb15-156"><a href="#cb15-156" aria-hidden="true" tabindex="-1"></a>         <span class="st">"PM2.5 Annual Average"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Annual average ambient concentrations of PM 2.5 in micrograms per cubic meter, based on seasonal averages and daily measurement (monitor and modeled data)</span><span class="st">`</span>)</span>
<span id="cb15-157"><a href="#cb15-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-158"><a href="#cb15-158" aria-hidden="true" tabindex="-1"></a><span class="co">#filling in modeled data for first and last two years, where there is no modeled data</span></span>
<span id="cb15-159"><a href="#cb15-159" aria-hidden="true" tabindex="-1"></a>airqualitycali <span class="ot">&lt;-</span> airqualitycali <span class="sc">%&gt;%</span></span>
<span id="cb15-160"><a href="#cb15-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb15-161"><a href="#cb15-161" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">Ozone Days Delete</span><span class="st">`</span>,</span>
<span id="cb15-162"><a href="#cb15-162" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb15-163"><a href="#cb15-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb15-164"><a href="#cb15-164" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">Ozone Person Days Delete</span><span class="st">`</span>,</span>
<span id="cb15-165"><a href="#cb15-165" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb15-166"><a href="#cb15-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb15-167"><a href="#cb15-167" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>)  <span class="sc">~</span> <span class="st">`</span><span class="at">PM2.5 Percent of Days Delete</span><span class="st">`</span>,</span>
<span id="cb15-168"><a href="#cb15-168" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb15-169"><a href="#cb15-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">PM2.5 Person Days</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb15-170"><a href="#cb15-170" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">PM2.5 Person Days Delete</span><span class="st">`</span>,</span>
<span id="cb15-171"><a href="#cb15-171" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">PM2.5 Person Days</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb15-172"><a href="#cb15-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">PM2.5 Annual Average</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb15-173"><a href="#cb15-173" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Year</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2012</span>,<span class="dv">2013</span>) <span class="sc">~</span> <span class="st">`</span><span class="at">PM2.5 Annual Average Delete</span><span class="st">`</span>,</span>
<span id="cb15-174"><a href="#cb15-174" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">PM2.5 Annual Average</span><span class="st">`</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb15-175"><a href="#cb15-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">contains</span>(<span class="st">"Delete"</span>))</span>
<span id="cb15-176"><a href="#cb15-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-177"><a href="#cb15-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-178"><a href="#cb15-178" aria-hidden="true" tabindex="-1"></a>For prepping the deaths data, I've filtered for only the causes of death I believe may be relevant to air quality, and have otherwise pivoted the data to allow for each row to represent a county-year.</span>
<span id="cb15-179"><a href="#cb15-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-182"><a href="#cb15-182" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-183"><a href="#cb15-183" aria-hidden="true" tabindex="-1"></a><span class="co">#turning calideaths into a wider format that where each rows is a year-county for combining</span></span>
<span id="cb15-184"><a href="#cb15-184" aria-hidden="true" tabindex="-1"></a>calideathswider <span class="ot">&lt;-</span> calideaths <span class="sc">%&gt;%</span></span>
<span id="cb15-185"><a href="#cb15-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Strata_Name <span class="sc">==</span> <span class="st">"Total Population"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-186"><a href="#cb15-186" aria-hidden="true" tabindex="-1"></a>  <span class="co">#de-selecting some stratifying variables</span></span>
<span id="cb15-187"><a href="#cb15-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Cause_Desc, <span class="sc">-</span>Annotation_Code, <span class="sc">-</span>Annotation_Desc, <span class="sc">-</span>Strata, <span class="sc">-</span>Strata_Name) <span class="sc">%&gt;%</span></span>
<span id="cb15-188"><a href="#cb15-188" aria-hidden="true" tabindex="-1"></a>  <span class="co">#focusing on relevant conditions</span></span>
<span id="cb15-189"><a href="#cb15-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Cause <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ALL"</span>, <span class="st">"CLD"</span>, <span class="st">"PNF"</span>, <span class="st">"SUI"</span>, <span class="st">"HTD"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-190"><a href="#cb15-190" aria-hidden="true" tabindex="-1"></a>  <span class="co">#pivoting into wider format</span></span>
<span id="cb15-191"><a href="#cb15-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Cause, <span class="at">values_from =</span> Count)</span>
<span id="cb15-192"><a href="#cb15-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-193"><a href="#cb15-193" aria-hidden="true" tabindex="-1"></a><span class="co">#merging data</span></span>
<span id="cb15-194"><a href="#cb15-194" aria-hidden="true" tabindex="-1"></a>airqualityanddeaths <span class="ot">&lt;-</span> <span class="fu">left_join</span>(calideathswider, airqualitycali, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"County"</span>, <span class="st">"Year"</span>))</span>
<span id="cb15-195"><a href="#cb15-195" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airqualityanddeaths)</span>
<span id="cb15-196"><a href="#cb15-196" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-197"><a href="#cb15-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-198"><a href="#cb15-198" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tidy data and some mutation for later analysis</span></span>
<span id="cb15-199"><a href="#cb15-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-200"><a href="#cb15-200" aria-hidden="true" tabindex="-1"></a>As I'm creating my data set, I'll perform some mutations and tidy-ing ahead of time, as I'll want to include some new columns while summarizing the data.</span>
<span id="cb15-201"><a href="#cb15-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-202"><a href="#cb15-202" aria-hidden="true" tabindex="-1"></a>First, I'll create a column for Population by using the person-day columns already provided.</span>
<span id="cb15-203"><a href="#cb15-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-204"><a href="#cb15-204" aria-hidden="true" tabindex="-1"></a>I'll also create "death per 100,000" columns in order to standardize deaths by counties.</span>
<span id="cb15-205"><a href="#cb15-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-206"><a href="#cb15-206" aria-hidden="true" tabindex="-1"></a>I also have created a "raw" PM2.5 Days column that counts the number of days, instead of a percent.</span>
<span id="cb15-207"><a href="#cb15-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-210"><a href="#cb15-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-211"><a href="#cb15-211" aria-hidden="true" tabindex="-1"></a>airqualityanddeaths <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb15-212"><a href="#cb15-212" aria-hidden="true" tabindex="-1"></a>  <span class="co">#creating a column for population based on person days column</span></span>
<span id="cb15-213"><a href="#cb15-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"Population"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-214"><a href="#cb15-214" aria-hidden="true" tabindex="-1"></a>  <span class="co">#creating standardized death columns</span></span>
<span id="cb15-215"><a href="#cb15-215" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"ALL Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">ALL</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-216"><a href="#cb15-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"CLD Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">CLD</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-217"><a href="#cb15-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"HTD Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">HTD</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-218"><a href="#cb15-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"PNF Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">PNF</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-219"><a href="#cb15-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"SUI Deaths per 100,000"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">SUI</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">Population</span><span class="st">`</span><span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-220"><a href="#cb15-220" aria-hidden="true" tabindex="-1"></a>  <span class="co">#creating a raw PM2.5 Days column, using the existing percent of days column</span></span>
<span id="cb15-221"><a href="#cb15-221" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"PM2.5 Days"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span><span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">365</span>)</span>
<span id="cb15-222"><a href="#cb15-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-223"><a href="#cb15-223" aria-hidden="true" tabindex="-1"></a><span class="co">#re-arranging</span></span>
<span id="cb15-224"><a href="#cb15-224" aria-hidden="true" tabindex="-1"></a>airqualityanddeaths <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb15-225"><a href="#cb15-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, County, Population, </span>
<span id="cb15-226"><a href="#cb15-226" aria-hidden="true" tabindex="-1"></a>         ALL, <span class="st">`</span><span class="at">ALL Deaths per 100,000</span><span class="st">`</span>, </span>
<span id="cb15-227"><a href="#cb15-227" aria-hidden="true" tabindex="-1"></a>         CLD, <span class="st">`</span><span class="at">CLD Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb15-228"><a href="#cb15-228" aria-hidden="true" tabindex="-1"></a>         HTD, <span class="st">`</span><span class="at">HTD Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb15-229"><a href="#cb15-229" aria-hidden="true" tabindex="-1"></a>         PNF, <span class="st">`</span><span class="at">PNF Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb15-230"><a href="#cb15-230" aria-hidden="true" tabindex="-1"></a>         SUI, <span class="st">`</span><span class="at">SUI Deaths per 100,000</span><span class="st">`</span>,</span>
<span id="cb15-231"><a href="#cb15-231" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">Ozone Person Days</span><span class="st">`</span>,</span>
<span id="cb15-232"><a href="#cb15-232" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">PM2.5 Person Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">PM2.5 Percent of Days</span><span class="st">`</span>, <span class="st">`</span><span class="at">PM2.5 Annual Average</span><span class="st">`</span>)</span>
<span id="cb15-233"><a href="#cb15-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-234"><a href="#cb15-234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-235"><a href="#cb15-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-236"><a href="#cb15-236" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2 ctd.</span></span>
<span id="cb15-237"><a href="#cb15-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-238"><a href="#cb15-238" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2. Present descriptive information:</span></span>
<span id="cb15-239"><a href="#cb15-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-240"><a href="#cb15-240" aria-hidden="true" tabindex="-1"></a>My new dataset consists of 870 rows, each representing a county-year.</span>
<span id="cb15-241"><a href="#cb15-241" aria-hidden="true" tabindex="-1"></a>There are 19 columns.</span>
<span id="cb15-242"><a href="#cb15-242" aria-hidden="true" tabindex="-1"></a>2 of these are "key" columns, indicating the county and year.</span>
<span id="cb15-243"><a href="#cb15-243" aria-hidden="true" tabindex="-1"></a>There is a single column for population.</span>
<span id="cb15-244"><a href="#cb15-244" aria-hidden="true" tabindex="-1"></a>The rest are all unique variables each representing a death count by disease type or an air quality measure.</span>
<span id="cb15-245"><a href="#cb15-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-248"><a href="#cb15-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-249"><a href="#cb15-249" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(airqualityanddeaths)</span>
<span id="cb15-250"><a href="#cb15-250" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airqualityanddeaths)</span>
<span id="cb15-251"><a href="#cb15-251" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-252"><a href="#cb15-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-253"><a href="#cb15-253" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3. Conduct summary statistics of the datasets</span></span>
<span id="cb15-254"><a href="#cb15-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-255"><a href="#cb15-255" aria-hidden="true" tabindex="-1"></a>First, I will look at summary statistics for air quality by county.</span>
<span id="cb15-256"><a href="#cb15-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-257"><a href="#cb15-257" aria-hidden="true" tabindex="-1"></a>As seen in the below table, the counties with the highest mean Ozone days are San Bernardino, Riverside, Tulare, and Kern.</span>
<span id="cb15-258"><a href="#cb15-258" aria-hidden="true" tabindex="-1"></a>Each with about a third of the year being above the national average.</span>
<span id="cb15-259"><a href="#cb15-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-260"><a href="#cb15-260" aria-hidden="true" tabindex="-1"></a>The counties with the highest mean PM2.5 days are similar - Fresno, Riverside and Kern - with a mean of around 50 days per year.</span>
<span id="cb15-261"><a href="#cb15-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-264"><a href="#cb15-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-265"><a href="#cb15-265" aria-hidden="true" tabindex="-1"></a>ozoneandpmdaysbycounty <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb15-266"><a href="#cb15-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(County) <span class="sc">%&gt;%</span></span>
<span id="cb15-267"><a href="#cb15-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MeanOzoneDays =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-268"><a href="#cb15-268" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianOzoneDays =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-269"><a href="#cb15-269" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxOzoneDays =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-270"><a href="#cb15-270" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinOzoneDays =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-271"><a href="#cb15-271" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanPM2.5Days =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-272"><a href="#cb15-272" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianPM2.5Days =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-273"><a href="#cb15-273" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxPM2.5Days =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-274"><a href="#cb15-274" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinPM2.5Days =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb15-275"><a href="#cb15-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-276"><a href="#cb15-276" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbycounty, <span class="fu">desc</span>(MeanOzoneDays)))</span>
<span id="cb15-277"><a href="#cb15-277" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbycounty, <span class="fu">desc</span>(MeanPM2<span class="fl">.5</span>Days)))</span>
<span id="cb15-278"><a href="#cb15-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-279"><a href="#cb15-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-280"><a href="#cb15-280" aria-hidden="true" tabindex="-1"></a>Next we will look at similar air quality summary statistics, but by year.</span>
<span id="cb15-281"><a href="#cb15-281" aria-hidden="true" tabindex="-1"></a>As you can see, 2002 seems to be a particularly bad year for both, topping out the mean days for both Ozone and PM2.5.</span>
<span id="cb15-282"><a href="#cb15-282" aria-hidden="true" tabindex="-1"></a>In general, the early 2000s seem to be bad for air quality.</span>
<span id="cb15-283"><a href="#cb15-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-286"><a href="#cb15-286" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-287"><a href="#cb15-287" aria-hidden="true" tabindex="-1"></a>ozoneandpmdaysbyyear <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb15-288"><a href="#cb15-288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb15-289"><a href="#cb15-289" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MeanOzoneDays =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb15-290"><a href="#cb15-290" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianOzoneDays =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb15-291"><a href="#cb15-291" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxOzoneDays =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb15-292"><a href="#cb15-292" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinOzoneDays =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Ozone Days</span><span class="st">`</span>),</span>
<span id="cb15-293"><a href="#cb15-293" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanPM2.5Days =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>),</span>
<span id="cb15-294"><a href="#cb15-294" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedianPM2.5Days =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>),</span>
<span id="cb15-295"><a href="#cb15-295" aria-hidden="true" tabindex="-1"></a>            <span class="at">MaxPM2.5Days =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>),</span>
<span id="cb15-296"><a href="#cb15-296" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinPM2.5Days =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">PM2.5 Days</span><span class="st">`</span>))</span>
<span id="cb15-297"><a href="#cb15-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-298"><a href="#cb15-298" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbyyear, <span class="fu">desc</span>(MeanOzoneDays)))</span>
<span id="cb15-299"><a href="#cb15-299" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(ozoneandpmdaysbyyear, <span class="fu">desc</span>(MeanPM2<span class="fl">.5</span>Days)))</span>
<span id="cb15-300"><a href="#cb15-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-301"><a href="#cb15-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-302"><a href="#cb15-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-303"><a href="#cb15-303" aria-hidden="true" tabindex="-1"></a>Finally, I'll look at some summary statistics for deaths per 100,000 by county.</span>
<span id="cb15-304"><a href="#cb15-304" aria-hidden="true" tabindex="-1"></a>The counties with the highest rate of death in this time period were Shasta, Del Norte, Butte, Inyo and Lake.</span>
<span id="cb15-305"><a href="#cb15-305" aria-hidden="true" tabindex="-1"></a>All relatively small, rural counties.</span>
<span id="cb15-306"><a href="#cb15-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-309"><a href="#cb15-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-310"><a href="#cb15-310" aria-hidden="true" tabindex="-1"></a><span class="st">"deathsper100,000bycounty"</span> <span class="ot">&lt;-</span> airqualityanddeaths <span class="sc">%&gt;%</span></span>
<span id="cb15-311"><a href="#cb15-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(County) <span class="sc">%&gt;%</span></span>
<span id="cb15-312"><a href="#cb15-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MeanALL =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ALL Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-313"><a href="#cb15-313" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanCLD =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">CLD Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-314"><a href="#cb15-314" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanHTD =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">HTD Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-315"><a href="#cb15-315" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanPNF =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PNF Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb15-316"><a href="#cb15-316" aria-hidden="true" tabindex="-1"></a>            <span class="at">MeanSUI =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">SUI Deaths per 100,000</span><span class="st">`</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb15-317"><a href="#cb15-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-318"><a href="#cb15-318" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">arrange</span>(<span class="st">`</span><span class="at">deathsper100,000bycounty</span><span class="st">`</span>, <span class="fu">desc</span>(MeanALL)))</span>
<span id="cb15-319"><a href="#cb15-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-320"><a href="#cb15-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-321"><a href="#cb15-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-322"><a href="#cb15-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-323"><a href="#cb15-323" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3. The Tentative Plan for Visualization</span></span>
<span id="cb15-324"><a href="#cb15-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-325"><a href="#cb15-325" aria-hidden="true" tabindex="-1"></a>To answer my first question about the correlation between air quality and deaths by county over time, I plan to create time-series visualizations.</span>
<span id="cb15-326"><a href="#cb15-326" aria-hidden="true" tabindex="-1"></a>This could be done in a few ways:</span>
<span id="cb15-327"><a href="#cb15-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-328"><a href="#cb15-328" aria-hidden="true" tabindex="-1"></a>One would be to take a series of counties for a given year (or vice versa) and create a series of small line plots with two y axes - one showing deaths per 100,000 and the other showing either Ozone or PM2.5 levels.</span>
<span id="cb15-329"><a href="#cb15-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-330"><a href="#cb15-330" aria-hidden="true" tabindex="-1"></a>Another way to show air quality over time would be to use a time-series heat map, that changes colors for years with higher levels.</span>
<span id="cb15-331"><a href="#cb15-331" aria-hidden="true" tabindex="-1"></a>How this would be directly compared to the deaths data, I'm not entirely sure.</span>
<span id="cb15-332"><a href="#cb15-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-333"><a href="#cb15-333" aria-hidden="true" tabindex="-1"></a>A possibility would be to use a map of california for selected years, and show both heat maps of county air quality levels and indicate a death per 100,000 number.</span>
<span id="cb15-334"><a href="#cb15-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-335"><a href="#cb15-335" aria-hidden="true" tabindex="-1"></a>For the second question - how each cause of death correlates to specific air quality values - I could create some type of correlation matrix, though more exploration is needed.</span>
<span id="cb15-336"><a href="#cb15-336" aria-hidden="true" tabindex="-1"></a>More simply, I could create similar time series line charts by counties, where each cause of death is mapped in addition to changes in air quality type.</span>
<span id="cb15-337"><a href="#cb15-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-338"><a href="#cb15-338" aria-hidden="true" tabindex="-1"></a>Much of the mutation has already been done, but a remaining point of contention will be how to handle NA's, particularly in the deaths data.</span>
<span id="cb15-339"><a href="#cb15-339" aria-hidden="true" tabindex="-1"></a>After some reading, it seems that NAs indicate that there was not enough data, so the numbers were being surpressed.</span>
<span id="cb15-340"><a href="#cb15-340" aria-hidden="true" tabindex="-1"></a>So perhaps a 0 values or even random value below a threshold would allow me to fill these in.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>